<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高田馬場</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.0/pixi.min.js"></script>
    <script src="js/pixi-gif.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/TakadanobabaFighter.js" defer></script>
    <!-- <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> -->
    <!-- <script src="js/dropdown.js"></script> -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');

        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            overflow: hidden;
        }

        h1,
        h2,
        h3,
        #header-tags,
        #header-author {
            font-family: DotGothic16, sans-serif;
        }

        /* .inventory {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            border-radius: 8px;
            display: none;
        }

        .inventory ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .inventory li {
            cursor: pointer;
            padding: 5px;
        }

        .inventory li:hover {
            background: rgba(255, 255, 255, 0.2);
        } */

        .dialogue {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            border-radius: 8px;
            display: none;

            .dialogue-character {
                float: left;
                margin-right: 10px;
            }
        }

        #game-view {
            position: relative;
            /* z-index: -1; */
            z-index: 0;
            pointer-events: auto;
        }

        #dropdown-menu {
            transition: transform 0.3s ease, opacity 0.3s ease;
            transform: translateY(-10px);
            opacity: 0;
            z-index: 100;
            position: absolute;

            #dpdm-left {
                button:hover {
                    cursor: pointer;
                    color: red;
                }
            }
        }

        #dropdown-menu.active {
            transform: translateY(0);
            opacity: 1;
        }

        .rotateLeft {
            animation: rotateLeft 1s linear;
        }

        .rotateRight {
            animation: rotateRight 1s linear;
        }

        @keyframes rotateLeft {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(-90deg);
            }
        }

        @keyframes rotateRight {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(90deg);
            }
        }
    </style>
</head>

<body class="">
    <!-- Floating Navbar -->
    <nav id="navbar" class="relative z-10 top-0 left-0 right-0 bg-white text-black z-50 drop-shadow-xl h-full">
        <div class="container mx-auto flex items-center">
            <!-- Empty Div to Align the Center Content -->
            <div class="flex-1"></div>

            <!-- Centered SVG -->
            <div class="flex-none text-center p-4">
                <a href="./">
                    <img src="img/mayu.svg" class="inline-block h-8" alt="Logo" />
                </a>
            </div>

            <!-- Hamburger Menu -->
            <div class="flex-1 text-right">
                <button class="absolute right-0 top-1/2 -translate-y-1/2 h-[64px] p-4 bg-white transition-colors duration-300" aria-label="Toggle Navigation Menu" aria-expanded="false" onclick="toggleNavMenu()">
                    <svg class="w-8 h-8 transition-colors duration-300" viewBox="0 0 403.49 403.49" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                        <g id="hamburger-menu-icon">
                            <rect width="403.49" height="80.7" />
                            <rect y="161.4" width="403.49" height="80.69" />
                            <rect y="322.79" width="403.49" height="80.7" />
                        </g>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Dropdown Menu -->
        <div id="dropdown-menu" class="absolute w-full bg-black opacity-0 invisible transition-all duration-300 ease-in-out pointer-events-none [&.active]:pointer-events-auto [&.active]:opacity-100 [&.active]:visible hidden">
            <div class="max-h-[calc(100vh-64px)] mx-auto overflow-y-auto">
                <div class="min-h-[calc(100vh-64px)] flex items-center">
                    <div class="w-[432px] px-16 text-white flex items-center justify-center">
                        <div class="text-center">
                            <button id="dpdm-left-uparrow" class="flex items-center justify-center w-[40px] h-[40px] mx-auto mb-16 transition-transform hover:scale-110">
                                <span class="text-[48px] leading-none text-white">△</span>
                            </button>
                            <div class="inline-flex whitespace-nowrap group transition-colors hover:bg-white">
                                <span class="text-[40px] font-dotgothic16 transition-colors group-hover:text-[#003BFF]">MAYU</span>
                                <span class="text-[40px] font-dotgothic16 ml-4 transition-colors group-hover:text-[#003BFF]">2024年</span>
                                <span class="text-[40px] font-dotgothic16 ml-4 transition-colors group-hover:text-[#003BFF]">1月号</span>
                            </div>
                            <button id="dpdm-left-darrow" class="flex items-center justify-center w-[40px] h-[40px] mx-auto mt-16 transition-transform hover:scale-110">
                                <span class="text-[48px] leading-none text-white">▽</span>
                            </button>
                        </div>
                    </div>
                    <div class="flex-1 min-h-[calc(100vh-64px)] bg-white bg-[url('/images/worn-dots.png')] bg-repeat bg-auto relative">
                        <div class="absolute inset-0 transition-opacity duration-300">
                            <div class="absolute inset-0 opacity-0 transition-opacity duration-300 bg-cover bg-center bg-no-repeat [&.active]:opacity-100" data-article="1" style="background-image: url('./img/menu-visual/menu_article_01.jpg');"></div>
                            <div class="absolute inset-0 opacity-0 transition-opacity duration-300 bg-cover bg-center bg-no-repeat [&.active]:opacity-100" data-article="2" style="background-image: url('./img/menu-visual/menu_article_02.jpg');"></div>
                            <div class="absolute inset-0 opacity-0 transition-opacity duration-300 bg-cover bg-center bg-no-repeat [&.active]:opacity-100" data-article="3" style="background-image: url('./img/menu-visual/menu_article_03.jpg');"></div>
                            <div class="absolute inset-0 opacity-0 transition-opacity duration-300 bg-cover bg-center bg-no-repeat [&.active]:opacity-100" data-article="4" style="background-image: url('./img/menu-visual/menu_article_04.jpg');"></div>
                            <div class="absolute inset-0 opacity-0 transition-opacity duration-300 bg-cover bg-center bg-no-repeat [&.active]:opacity-100 active" data-article="5" style="background-image: url('./img/menu-visual/menu_article_05.jpg');"></div>
                        </div>
                        <div class="py-12 px-8 relative z-10 h-[600px]">
                            <div class="articles-wrapper relative">
                                <div class="article-item absolute w-full transition-all duration-300" style="top: 0" data-article="1">
                                    <a href="./neo-retro.html" class="inline-block group cursor-pointer transition-all duration-300" data-article-page="neo-retro" data-hover-trigger="1">
                                        <p class="text-[20px] mb-4">
                                            <span class="bg-black text-white inline-block px-2 transition-colors group-hover:bg-white group-hover:text-[#003BFF]">No.
                                                1
                                            </span>
                                            </p>
                                        <h3 class="text-[32px] font-dotgothic16 text-white bg-black inline-block transition-colors group-hover:bg-white group-hover:text-[#003BFF]">
                                            新[ネオ]レトロ再燃！新宿、今こそ喫茶でしょ。
                                        </h3>
                                    </a>
                                </div>
                                <div class="article-item absolute w-full transition-all duration-300" style="top: 168px" data-article="2">
                                    <a href="./shin-okubo.html" class="inline-block group cursor-pointer transition-all duration-300" data-article-page="shin-okubo" data-hover-trigger="2">
                                        <p class="text-[20px] mb-4">
                                            <span class="bg-black text-white inline-block px-2 transition-colors group-hover:bg-white group-hover:text-[#003BFF]">No.
                                                2
                                            </span>
                                        </p>
                                        <h3 class="text-[32px] font-dotgothic16 text-white bg-black inline-block transition-colors group-hover:bg-white group-hover:text-[#003BFF]">
                                            はじまりのコリアンタウン
                                        </h3>
                                    </a>
                                </div>
                                <div class="article-item absolute w-full transition-all duration-300" style="top: 336px" data-article="3">
                                    <a href="./chi-tei.html" class="inline-block group cursor-pointer" data-hover-trigger="3">
                                        <p class="text-[20px] mb-4">
                                            <span class="bg-black text-white inline-block px-2 transition-colors group-hover:bg-white group-hover:text-[#003BFF]">No.
                                                3
                                            </span>
                                        </p>
                                        <h3 class="text-[32px] font-dotgothic16 text-white bg-black inline-block transition-colors group-hover:bg-white group-hover:text-[#003BFF]">
                                            新宿駅に"地底人"!? 
                                        </h3>
                                    </a>
                                </div>
                                <div class="article-item absolute w-full transition-all duration-300" style="top: 504px" data-article="4">
                                    <a href="./uju-mura.html" class="inline-block group cursor-pointer" data-hover-trigger="4">
                                        <p class="text-[20px] mb-4">
                                            <span class="bg-black text-white inline-block px-2 transition-colors group-hover:bg-white group-hover:text-[#003BFF]">No.
                                                4
                                            </span>
                                        </p>
                                        <h3 class="text-[32px] font-dotgothic16 text-white bg-black inline-block transition-colors group-hover:bg-white group-hover:text-[#003BFF]">
                                            コズミックパワー全！！<\宙村>の神秘
                                        </h3>
                                    </a>
                                </div>
                                <div class="article-item absolute w-full transition-all duration-300" style="top: 504px" data-article="5">
                                    <a href="./takano-baba.html" class="inline-block group cursor-pointer transition-all duration-300" data-article-page="takano-baba" data-hover-trigger="5">
                                        <p class="text-[20px] mb-4">
                                            <span class="bg-white text-[#003BFF] inline-block px-2 transition-colors group-hover:bg-white group-hover:text-[#003BFF]">No.
                                                5
                                            </span>
                                        </p>
                                        <h3 class="text-[32px] font-dotgothic16 bg-white text-[#003BFF] inline-block transition-colors group-hover:bg-white group-hover:text-[#003BFF]">
                                            高田馬場って何だ！？新宿の学園都市に潜入
                                        </h3>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page content -->
    <div class="h-screen overflow-auto">
        <!-- Page header section -->
        <div class="flex items-start h-[40%] bg-black w-full" id="page-header">
            <div class="self-center text-left text-white p-40">
                <span id="header-tags" class="pl-[32px] text-[20px]">#カルチャー　＃トリップ</span>
                <h1 id="header-title" class="text-[40px] font-normal">高田馬場って何だ！？新宿の学園都市に潜入</h1>
                <h3 id="header-subtitle" class="pl-[32px] text-[32px] font-normal">公衆の面前で飲酒するスポットTOP3！</h3>
                <p id="header-author" class="pl-[32px] text-[16px]">writer:Hunter Nakagawa</p>
            </div>
        </div>
        <!-- Game view section -->
        <div id="game-view" class="relative z-0 pointer-events-auto w-full bg-blue h-[90%] relative">

            <button id="toggle-survival"
                class="absolute bottom-4 right-4 p-2 bg-[#00FF95] rounded-full shadow-lg hover:bg-gray-100 focus:ring-2 focus:ring-blue-500 opacity-50"
                onclick="toggleSurvivalMode()">
                <img src="img/sprites/survival_mode.svg" class="h-8" alt="Survival Mode" />
            </button>
            <!-- Game info panel -->
            <div id="game-info" class="absolute top-4 left-4 hidden z-50">

            </div>
            <!-- Inventory -->
            <div class="inventory absolute bottom-2.5 left-2.5 bg-black bg-opacity-70 text-white p-2.5 font-sans text-sm rounded-lg hidden"
                id="inventory">
                <strong>Inventory:</strong>
                <ul id="inventory-list" class="list-none m-0 p-0"></ul>
            </div>
            <!-- <div id="instructions" class="absolute top-4 right-4 z-50">
                <div class="top-[5rem] bg-white text-black p-4 m-4 shadow-lg z-40 w-72">
                    <div>
                        <h1 class="text-2xl font-bold bg-[#003BFF] text-white p-2">高田馬場ファイターズ</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <img src="img/sprites/player.svg" class="w-12 h-12 rounded-full border-2 border-black">
                        <div class="flex-1">
                            <div class="text-sm font-semibold">HP</div>
                            <div class="relative w-full h-4 bg-gray-500 rounded-full overflow-hidden">
                                Health bar fills the width dynamically
                                <div id="health-bar" 
                                     class="absolute top-0 left-0 h-full bg-red-600 rounded-full transition-all duration-300"
                                     style="width: 75%;"></div>
                            </div>
                            <span class="text-sm text-gray-300" id="character-health">75 / 100</span>
                        </div>
                    </div> -->
                    <!-- <div class="">
                        <div class=" justify-between items-center">
                            <div class="text-sm" id="controls">
                                <ul class="py-2">
                                    <li><span class="font-extrabold">[ WASD ]</span> 移動</li>
                                    <li><span class="font-extrabold">[ F ]</span> 相互作用・打つ</li>
                                </ul>
                            </div>
                            <div id="directions" class="text-sm">
                                <h2 class="font-bold bg-[#003BFF] text-white inline-block p-1">やり方</h2>
                                <p>高田馬場を探索し、さらに詳しく知る！</p>
                                <p>チャレンジしてみませんか？右下の<span
                                        class="bg-[#FF2F00] text-white font-bold">「サバイバルモード」</span>をオンにして！</p>
                            </div>
                            <div class="flex space-x-2" id="buff-icons">
                            </div>
                        </div>
                    </div>
                </div> -->
                <!-- <strong>Keys:</strong>
                <ul id="inventory-list">
                    <li>[ WASD/Arrow ] 移動</li>
                    <li>[ Space ] 使用・打つ</li>
                    <li>[ I ] Inventory</li>
                     add more instructions later... should it always be visible?
                </ul>
                <strong>Directions:</strong>
                <ul id="inventory-list">
                    <li>地図を探検して、ランドマークで高田馬場についてもっと知ろう</li>
                    <li>酔っ払ってるサラリーマン/動物園のネズミに打つ</li>
                    <li>アイテムを集めて高田馬場庇う！</li>
                </ul>
            </div> -->
            <!-- <div class="inventory" style="display: none;">
                <strong>Keys:</strong>
                <ul id="inventory-list">
                    <li>[ WASD/Arrow ] 移動</li>
                    <li>[ Space ] 使用・打つ</li>
                    <li>[ I ] Inventory</li>
                     add more instructions later... should it always be visible? -->
            <!-- </ul>
                <strong>Directions:</strong>
                <ul id="inventory-list">
                    <li>地図を探検して、ランドマークで高田馬場についてもっと知ろう</li>
                    <li>酔っ払ってるサラリーマン/動物園のネズミに打つ</li>
                    <li>アイテムを集めて高田馬場庇う！</li>
                </ul>
            </div> -->

            <!-- Infobox -->
            <div id="infobox-modal" class="modal absolute inset-0 bg-black bg-opacity-50 hidden items-start justify-center z-50 pt-30 overflow-y-auto h-full" id="landmark-modal">
                <div id="infobox-content" class="modal-content bg-gray-100 pb-6 shadow-lg w-4/5 max-w-4xl relative m-30">
                    <div id="infobox-header" class="modal-header flex bg-[#003BFF] text-[#E5FF00] text-4xl font-bold items-center justify-between h-16">
                        <!-- Title -->
                        <div class="flex-1 flex items-center">
                            <h1 id="infobox-title" class="p-2"></h1>
                        </div>
                        <!-- Close Button -->
                        <div id="infobox-actions" class="aspect-square h-full bg-[#E5FF00] flex items-center justify-center cursor-pointer">
                            <button id="infobox-close" class="text-[#003BFF] text-5xl font-bold">&times;</button>
                        </div>
                    </div>
                    <!-- Content -->
                    <div id="infobox-body" class="flex flex-col mt-4 px-4 font-[700] text-[16px]">
                        <div id="infobox-body-image" class="flex-1 p-[32px]">
                            <img id="infobox-body-img" src="">
                        </div>
                        <div id="infobox-body-text" class="flex-1 p-[32px]">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Introduction Modal -->
            <div id="intro-modal" class="modal absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="modal-content bg-gray-100 pb-6 shadow-lg w-4/5 max-w-4xl relative">
                    <div class="modal-header flex bg-[#003BFF] text-[#E5FF00] text-4xl font-bold items-center justify-between h-16">
                        <!-- Title -->
                        <div class="flex-1 flex items-center">
                            <h1 class="p-2">高田馬場ファイターズ</h1>
                        </div>
                    </div>
                    <!-- Content -->
                    <div class="modal-body mt-4 px-4 flex flex-row">
                        <div class="flex-1">
                            <h3 class="text-[20px] font-normal bg-[#003BFF] text-[#E5FF00] inline-block p-2">目的</h3>
                            <p class="text-lg mb-4">高田馬場を探索し、さらに詳しく知る冒険に出かけましょう！</p>
                            <h3 class="text-[20px] font-normal bg-[#003BFF] text-[#E5FF00] inline-block p-2">コントロール</h3>
                            <ul class="mb-4">
                                <li><span class="font-bold">[ WASD ]</span> 移動</li>
                                <li><span class="font-bold">[ F ]</span> 相互作用・打つ</li>
                            </ul>
                            <h3 class="text-[20px] font-normal bg-[#003BFF] text-[#E5FF00] inline-block p-2">サバイバルモード</h3>
                            <p class=" text-lg mb-4">チャレンジしてみませんか？右下の「サバイバルモード」をONにして！</p>
                        </div>
                        <div class="flex flex-1 text-center justify-center">
                            <button id="start-game-btn" class="bg-[#00FF95] self-center text-black text-4xl px-8 py-4 rounded-1/2 shadow-lg hover:bg-gray-100 focus:ring-2 focus:ring-blue-500" onclick="gameStart()">
                                <h2>PRESS START</h2>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Minimap -->
            <div id="minimap"
                class="modal absolute inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 pt-10">
                <div id="minimap-content" class="modal-content bg-gray-100 pb-6 shadow-lg w-4/5 max-w-4xl relative">
                    <div id="minimap-header"
                        class="modal-header flex bg-black text-green-400 text-4xl font-bold items-center justify-between h-16">
                        <!-- Title -->
                        <div class="flex-1 flex items-center">
                            <h1 id="minimap-title" class="p-2">ミニマップ</h1>
                        </div>
                        <!-- Close Button -->
                        <div id="minimap-actions"
                            class="aspect-square h-full bg-[#00FF95] flex items-center justify-center cursor-pointer"
                            onclick="toggleMinimap()">
                            <button id="minimap-close" class="text-black text-5xl font-bold">&times;</button>
                        </div>
                    </div>
                    <!-- Content -->
                    <div id="minimap-body" class="modal-body mt-4 px-4">
                        <img src="img/minimap.png" />
                    </div>
                </div>
            </div>
            <!-- Game over screen -->
            <div id="gameover-modal"
                class="modal absolute inset-0 bg-black bg-opacity-50 hidden items-start justify-center z-50 pt-10"
                id="landmark-modal">
                <div id="gameover-content" class="modal-content bg-gray-100 pb-6 shadow-lg w-4/5 max-w-4xl relative">
                    <div id="gameover-header"
                        class="modal-header flex bg-black text-red-400 text-4xl font-bold items-center justify-between h-16">
                        <!-- Title -->
                        <div class="flex-1 flex items-center">
                            <h1 id="gameover-title" class="p-2">GAME OVER</h1>
                        </div>
                        <!-- Close Button -->
                        <div id="gameover-actions"
                            class="aspect-square h-full bg-red-400 flex items-center justify-center cursor-pointer">
                            <button id="gameover-close" class="text-black text-5xl font-bold"
                                onclick="document.getElementById('gameover-modal').style.display = 'none'">&times;</button>
                        </div>
                    </div>
                    <!-- Content -->
                    <div id="gameover-body" class="flex mt-4 px-4 font-[700] text-[16px]">
                        <div id="gameover-body-stats" class="flex-1 p-[32px]">
                            <ul>
                                <li>存続時間（秒）: <span id="player-time_played"></span></li>
                                <li>与えたダメージ: <span id="player-damage_dealt"></span></li>
                                <li>受けたダメージ: <span id="player-damage_taken"></span></li>
                                <li>負けした敵の数: <span id="player-enemies_killed"></span></li>
                                <li>集めたアイテムの数: <span id="player-items_collected"></span></li>
                                <li>アイテムを使った回数: <span id="player-items_used"></span></li>
                                <li>訪ねたランドマーク数: <span id="player-landmarks_visited"></span></li>
                                <li>回復量: <span id="player-healed"></span></li>
                            </ul>
                            <!-- <hr /> -->
                            <h2 id="player-total_score" class="text-6xl pt-2"></h2>
                        </div>
                        <div id="gameover-body-text" class="flex flex-col flex-1 p-[32px] text-4xl h-full">
                            <div class="flex-1">
                                <h3 class="pb-2 text-6xl">残念</h3>
                                <p class="text-xs">TIP: 「サバイバルモード」を有効にするのは、ランドマークを見終わった時だけにする方が良いです！（それでもスコアにカウントされます）</p>
                            </div>
                            
                            <!-- <div class="flex flex-1 text-center justify-center">
                                <button id="respawn" class="bg-[#00FF95] self-center text-black text-4xl px-8 py-4 rounded-1/2 shadow-lg hover:bg-gray-100 focus:ring-2 focus:ring-blue-500" onclick="respawn()">
                                    リスポーン
                                </button>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Article -->
        <div id="articles max-h-full">
            <div id="article-expander" class="flex h-1/8 bg-[#003BFF] p-[16px] align-center justify-center cursor-pointer text-white" onclick="toggleArticle()">
                <h3 class="hover:animate-pulse"><span id="article-expander-rightarr">&rarr;</span> 代わりに全体の記事を表示されます <span id="article-expander-leftarr">&larr;</span></h3>
            </div>
            <!-- when article-expander is clicked, #article expands to reveal the text that is in the game, so people who dont want to play can read instead -->
            <div id="article" class="py-24 px-40 hidden">
                <h1 class="text-5xl inline-block px-2 bg-[#003BFF] py-4 text-white" id="article-title">高田馬場へようこそ！！</h1>
                <br />
                <p class="pt-4 font-bold">おっ、なんだこれ！？人前で飲んでる人！？輪になってタバコ吸ってる人？外国人だらけじゃないか！どうなってるんだな！？</p>
                <div id="article-overview" class="py-8">
                    <img class="px-16" src="img/article_assets/takadanobaba.jpg" class="">
                    <p class="pt-4 font-bold">ここ高田馬場は新宿区の大学生、日本語学習者の拠点！教育の中心地みたいね！新しい出会える人もたくさんいるよ。見どころ満載です！ほらー、きてきて！</p>
                </div>
                <div id="article-landmarks" class="">
                    <div id="article-landmark-rotary" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">ロータリー</h2>
                        <img class="px-16 py-4" src="img/article_assets/rotary_2.jpg">
                        <p class="pt-4 text-base font-bold">
                            こっちはタバコを吸ったり、お酒を飲んだりする場所ですよ。「ここは喫煙禁止」と書かれた掲示が見える？ここの人たちはそれを提案として受け止めているんだ。マジでクレイジーでしょ？！ロータリーはいつも人間で賑わっているから、たまには遊びにおいでよね！
                        </p>
                        <p class="pt-4 text-base font-bold">
                            このエリアは飲んだ後に友達たちとたむろするのに最適な場所だ！特に居酒屋でビールを一杯飲んだ後は、夜風がとても爽やかだ！しかし、エンターテインメントはそれだけではありまーーーーーーせん！たまにネズミを見ることもできる。まるで動物園だ！（警告：ネズミを撫でないでください。）
                        </p>
                    </div>
                    <div id="article-landmark-sakae" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">さかえ通り</h2>
                        <img class="px-16 py-4" src="img/article_assets/sakae_1.jpg" />
                        <p class="pt-4 text-base font-bold">
                            この道には居酒屋、レストラン、屋台、バー、クラブが一杯あるよ！この狭い通りにどれだけの人がいるかわかる？それがこの地域がいかに活気に満ちているかを物語っている。絶対に退屈しない！あ、見てくれ！動物園のネズミが戻ってきた！(厳重警告：ネズミを撫でないでください）
                        </p>
                    </div>
                    <div id="article-landmark-bigbox" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">Big Box</h2>
                        <img class="px-16 py-4" src="img/article_assets/bigbox.jpg" />
                        <p class="pt-4 text-base font-bold">高田馬場のランドマーク、Big
                            Box！中にはお店、レストラン、フィットネスクラブ、ゲームセンターまでたっぷりあるよ！なんてこった！窓はどこ！？そうですね：Big
                            Boxには窓がない。だから、基本的に時間を知ることは不可能です！深夜だとわかるのは、追い出されたときだけだ。結構楽しいよ！僕と友達はここで数え切れないほどの時間を過ごした。懐かしい思い出だ。ほとんどが強制送還されてしまったのが残念だ。
                        </p>
                    </div>
                    <div id="article-landmark-mural" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">手塚の壁画</h2>
                        <img class="px-16 py-4" src="img/article_assets/mural.jpg" />
                        <p class="pt-4 text-base font-bold">
                            あっ、鉄腕アトムがいる。何でここにいるんだろう？まあ、ここで生まれたからだよ！そうです！世界的な漫画家、手塚治虫様がこの高田馬場で鉄腕アトムを生み出したのだ！手塚治虫様は大阪で生まれだけど、ほぼ一生を高田馬場で過ごしたんだ。だから、手塚様が亡くなったとき、生涯を記念する壁画が作られた。この壁画には、彼の他の作品も祀られている。
                        </p>
                    </div>
                    <div id="article-landmark-street" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">不明通り</h2>
                        <img class="px-16 py-4" src="img/article_assets/unnamed_street.jpg" />
                        <p class="pt-4 text-base font-bold">
                            この通りが見えますか？高田馬場で日本語学校に通っていた頃、毎日のように通った道だ。いい思い出がたくさんあります。この白いパーカーを着ている男がいるでしょ？高田馬場で出会った親友だ。
                        </p>
                    </div>
                    <div id="article-landmark-vendingmachine" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">秘密の自販機</h2>
                        <img class="px-16 py-4" src="img/article_assets/jihanki_1.jpg" />
                        <p class="pt-4 text-base font-bold">
                            もし1000円あったら、この秘密の自販機を見つけに来てね！本当に不思議な自販機です。何が出てくるかはランダムだけど、多分めっちゃくちゃカッコイイよ！ほら、あの変人も懐中電灯を手に入れたよ！どこにあるかは教えませんけどｗｗｗｗ。高田馬場を探検しに来てね！
                        </p>
                    </div>
                    <div id="article-landmark-top3" class="py-8">
                        <h2 class="inline-block px-2 text-4xl font-normal py-4 bg-[#003BFF] text-white">
                            公衆の面前で飲酒するスポットTOP3紹介</h2>
                        <!-- <img src="img/article_assets/DSC03503.JPG" /> -->
                        <p class="pt-4 text-base font-bold">皆さんお待ちかねの最終章は、俺が選ぶ公共の場で飲めるスポットTOP3だ！</p>
                        <p class="pt-4 text-base font-bold">
                            さて、人前で飲むといえば、アルコール飲料のことだ。ポカリスエットのことだと思った？NO！強い酒のことだ。好きな場所で飲めるのなら、なおさらだ！というわけで、人前でお酒が飲める場所ベスト3を紹介しよう：
                        </p>
                        <ul>
                            <li class="py-8">
                                <h3 class="inline-block text-2xl bg-[#CD7F32] px-2 py-2">3位：ロータリー</h3>
                                <img class="px-16 py-4" src="img/article_assets/rotary.jpg" />
                                <p class="pt-4 text-base font-bold">
                                    これは逃げの答えのようだが、ここは飲むには本当に楽しい場所だ！近くで飲んでいる人たちがいて、活気ある雰囲気が、より一層活力を与えてくれる！友達がいないから一人で飲む？それもいいよ！一人で飲んでいれば、そのうち誰かが誘ってくれる！普通の社交文化とは全く逆でしょう？
                                </p>
                            </li>
                            <li class="py-8">
                                <h3 class="inline-block text-2xl bg-[#C0C0C0] px-2 py-2">2位：さかえ通り</h3>
                                <img class="px-16 py-4" src="img/article_assets/sakae_2.jpg" />
                                <p class="pt-4 text-base font-bold">さかえ通りは、高田馬場の中心地だ！ここにはたくさんのバー、居酒屋、クラブがある！どこで飲むか迷ったら、さかえ通りに行けばいい！</p>
                            </li>
                            <li class="py-8">
                                <h3 class="inline-block text-2xl bg-[#FFD700] px-2 py-2 font-bold">1位：この道</h3>
                                <img class="px-16 py-4" src="img/article_assets/drinking_spot1.jpg" />
                                <p class="pt-4 text-base font-bold">
                                    超真面目に言うけど、高田馬場で一番飲める場所だよ。友達を何人か誘って、コンビニで飲み物（もちろんお酒）をたくさん買って、この通りの脇をぶらぶらしながら飲んでください。この通りをさらに奥に進むと神田川があり、そこで他の人たちも飲んでいる可能性が高い！
                                </p>
                                <p class="pt-4 text-base font-bold">賑やかな街の片隅で、仲間と酒を酌み交わしながら、ただぶらぶらすることは最高だよ。</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer -->
        <div id="footer" class="flex flex-row w-full justify-between h-3/5 bg-black text-white items-center p-[64px]">
            <div id="footer-left" class="w-[400px]">
                <div id="footer-left-socials" class="flex flex-row gap-[16px] pb-[16px]">
                    <a href="#">
                        <img src="img/social/instagram-logo 1.svg" class="h-[48px] w-[48px] mr-[16px]"
                            alt="Instagram" />
                    </a>
                    <a href="#">
                        <img src="img/social/x-logo.svg" class="h-[48px] w-[48px] mr-[16px]" alt="Facebook" />
                    </a>
                    <a href="#">
                        <img src="img/social/line-logo.svg" class="h-[48px] w-[48px]" alt="Twitter" />
                    </a>
                </div>
                <hr class="py-[8px]" />
                <div id="footer-left-articles">
                    <span class="text-[32px] font-bold ">1月号</span>
                    <ul>
                        <li class="py-[4px]">
                            <a href="./neo-retro.html" class="hover:text-[#FF2F00] hover:animate-pulse">
                                <span>No.1 新(ネオ)レトロ再燃！ 新宿、今こそ喫茶でしょ。</span>
                            </a>
                        </li>
                        <li class="py-[4px]">
                            <a href="./shin-okubo.html" class="hover:text-[#FF2F00] hover:animate-pulse">
                                <span>No.2 はじまりのコリアンタウン</span>
                            </a>
                        </li>
                        <li class="py-[4px]">
                            <a href="./chi-tei.html" class="hover:text-[#FF2F00] hover:animate-pulse">
                                <span>No.3 新宿駅に”地底人”！？</span>
                            </a>
                        </li>
                        <li class="py-[4px]">
                            <a href="./uju-mura.html" class="hover:text-[#FF2F00] hover:animate-pulse">
                                <span>No.4 コズミックパワー全開！！<宇宙村>の神秘</span>
                            </a>
                        </li>
                        <li class="py-[4px]">
                            <a href="takadanobaba.html" class="hover:text-[#FF2F00] hover:animate-pulse">
                                <span>No.5 高田馬場って何だ！？新宿の学園都市に潜入</span>
                            </a>
                        </li>
                    </ul>
                    <hr class="pt-[8px]" />
                    <div class="text-right">
                        <a href="./" class="hover:text-[#FF2F00] hover:animate-pulse">バックナンバーを見る →</a>
                    </div>
                </div>
            </div>
            <div id="footer-right" class="flex flex-col text-right">
                <a href="./">
                    <img src="img/mayu-white.svg" class="inline-block h-[106px]" alt="Logo" />
                </a>
                <span class="text-[12px] font-medium">©2024 by MAYU-Editorial department, ltd.(Tokyo) </span>
            </div>
        </div>
    </div>
    <script>
        // document.addEventListener('DOMContentLoaded', function () {
        //     var imported = document.createElement('script');
        //     imported.src = 'js/TakadanobabaFighter.js';
        //     document.head.appendChild(imported);
        //     // document.addEventListener('contextmenu', event => event.preventDefault());
        // })

        // function toggleNavMenu() {
        //     const dropdownMenu = document.getElementById('dropdown-menu');
        //     dropdownMenu.classList.toggle('active');
        //     dropdownMenu.classList.toggle('hidden');
        // }

        // DOM Elements
        const menuButton = document.querySelector('[aria-label="Toggle Navigation Menu"]');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const dpdm_left_uparrow = document.getElementById('dpdm-left-uparrow');
        const dpdm_left_downarrow = document.getElementById('dpdm-left-darrow');
        const articles = document.querySelectorAll('.article-item');
        const hoverTriggers = document.querySelectorAll('[data-hover-trigger]');
        const yearDisplay = document.querySelector('.font-dotgothic16:nth-child(2)');
        const monthDisplay = document.querySelector('.font-dotgothic16:nth-child(3)');

        // State Variables
        let currentYear = 2024;
        let currentMonth = 1;
        let currentArticleSet = 1; // 1 for articles 1-4, 2 for article 5

        // Constants
        const ARTICLE_SPACING = 168;

        // Function: Toggle Dropdown Menu
        function toggleNavMenu() {
        dropdownMenu.classList.toggle('active');
        dropdownMenu.classList.toggle('hidden');
        }

        // Function: Update Article Positions
        function updateArticlePositions(showingArticle5) {
            articles.forEach((article) => {
                const articleNumber = parseInt(article.dataset.article, 10);

                if (showingArticle5) {
                if (articleNumber === 1) {
                    article.style.top = `-${ARTICLE_SPACING}px`;
                    article.style.opacity = '0';
                    article.style.pointerEvents = 'none';
                } else if (articleNumber === 5) {
                    article.style.top = `${504}px`;
                    article.classList.remove('hidden');
                    requestAnimationFrame(() => {
                    article.style.opacity = '1';
                    article.style.pointerEvents = 'auto';
                    });
                } else {
                    const newPosition = (articleNumber - 2) * ARTICLE_SPACING;
                    article.style.top = `${newPosition}px`;
                }
                } else {
                if (articleNumber === 1) {
                    article.style.top = '0';
                    article.style.opacity = '1';
                    article.style.pointerEvents = 'auto';
                } else if (articleNumber === 5) {
                    article.style.opacity = '0';
                    article.style.pointerEvents = 'none';
                    setTimeout(() => article.classList.add('hidden'), 300);
                } else {
                    const newPosition = (articleNumber - 1) * ARTICLE_SPACING;
                    article.style.top = `${newPosition}px`;
                }
                }
            });
        }

        // Function: Update Month Display
        function updateMonthDisplay() {
            if (yearDisplay && monthDisplay) {
                yearDisplay.textContent = `${currentYear}年`;
                monthDisplay.textContent = `${currentMonth}月号`;
            }
        }

        // Event: Menu Button Click
        // menuButton?.addEventListener('click', toggleNavMenu);

        // Event: Navigate Months with Arrows
        dpdm_left_uparrow?.addEventListener('click', () => {
            if (currentMonth === 1) {
                currentMonth = 12;
                currentYear--;
            } else {
                currentMonth--;
            }
            updateMonthDisplay();
        });

        dpdm_left_downarrow?.addEventListener('click', () => {
            if (currentMonth === 12) {
                currentMonth = 1;
                currentYear++;
            } else {
                currentMonth++;
            }
            updateMonthDisplay();
        });

        // Event: Hover Effects for Background
        hoverTriggers.forEach(trigger => {
            trigger.addEventListener('mouseenter', () => {
                const articleId = trigger.dataset.hoverTrigger;
                articles.forEach(bg => bg.classList.remove('active'));
                document.querySelector(`[data-article="${articleId}"]`)?.classList.add('active');
            });
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateArticlePositions(true);
            updateMonthDisplay();
        });

        function toggleArticle() {
            var article = document.getElementById('article');
            var article_expander_rarr = document.getElementById('article-expander-rightarr');
            var article_expander_larr = document.getElementById('article-expander-leftarr');
            if (article.classList.contains('hidden')) {
                article_expander_rarr.classList.add('rotateRight');
                article_expander_larr.classList.add('rotateLeft');
                article.classList.remove('hidden');
            } else {
                article_expander_rarr.classList.remove('rotateRight');
                article_expander_larr.classList.remove('rotateLeft');
                article.classList.add('hidden');
            }
        }
        window.addEventListener('keydown', function (e) {
            if (e.keyCode == 32 && e.target == document.getElementById('game-view')) {
                e.preventDefault();
            }
        });

        // dropdown functionality
        // function set_dropdown_date() {
        //     var date = new Date();
        //     var month = date.toLocaleString('default', { month: 'long' });
        //     var year = date.getFullYear();
        //     document.getElementById('dpdm-left-date').innerText = `MAYU ${year}年 ${month}号`;
        // }

        // $('#no1').hover(function () {
        //     $('dpdm-right').background = 'img/article_assets/retro.jpg';
        //     console.log('changing background [no1]');
        // }, function () {
        //     $('dpdm-right').background = '';
        //     console.log('resetting background to original');
        // });

        function gameStart() {
            const introModal = document.getElementById('intro-modal');
            introModal.style.display = 'none';
            spawnPlayer();
        }

        function respawn() {
            const gameoverModal = document.getElementById('gameover-modal');
            gameoverModal.style.display = 'none';
            respawnPlayer();
        }

    </script>
    <!-- <script type="text/javascript" src="js/TakadanobabaFighter.js"></script> -->
</body>

</html>